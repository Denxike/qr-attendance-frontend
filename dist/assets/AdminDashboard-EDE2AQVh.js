import{j as e}from"./index-qMUiajPw.js";import{r as t}from"./vendor-BCPqKLS0.js";import{b as d}from"./api-BtkNoZFK.js";import{N as G}from"./Navbar-DZ9rV-pg.js";import{h as W,L as C,B as Y,G as Q,P as U}from"./icons-DPHu3S6L.js";const Z=()=>{const[o,T]=t.useState("departments"),[u,L]=t.useState([]),[m,R]=t.useState([]),[x,k]=t.useState([]),[j,q]=t.useState([]),[p,y]=t.useState(!0),[N,f]=t.useState({departmentName:"",description:""}),[S,I]=t.useState(!1),[l,i]=t.useState({courseCode:"",courseName:"",description:"",credits:"",semester:"",teacherId:"",departmentId:""}),[D,w]=t.useState(!1),[v,b]=t.useState({studentId:"",courseId:""}),[F,A]=t.useState(!1),[g,E]=t.useState(null),n=(s,a)=>{E({type:s,message:a}),setTimeout(()=>E(null),4e3)},h=t.useCallback(async()=>{y(!0);try{const[s,a,r,c]=await Promise.all([d.getAllDepartments(),d.getAllCourses(),d.getAllStudents(),d.getAllTeachers()]);L(s.data),R(a.data),k(r.data),q(c.data)}catch(s){console.error("Failed to load data:",s),n("error","Failed to load data")}finally{y(!1)}},[]);t.useEffect(()=>{h()},[h]);const $=async s=>{var a,r;s.preventDefault(),I(!0);try{await d.createDepartment(N),f({departmentName:"",description:""}),await h(),n("success",`Department "${N.departmentName}" created!`)}catch(c){n("error",((r=(a=c.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create department")}finally{I(!1)}},P=async(s,a)=>{if(window.confirm(`Delete department "${a}"?`))try{await d.deleteDepartment(s),await h(),n("success","Department deleted")}catch{n("error","Failed to delete department")}},M=async s=>{var a,r;s.preventDefault(),w(!0);try{await d.createCourse({...l,credits:parseInt(l.credits),teacherId:parseInt(l.teacherId),departmentId:parseInt(l.departmentId)}),i({courseCode:"",courseName:"",description:"",credits:"",semester:"",teacherId:"",departmentId:""}),await h(),n("success",`Course "${l.courseCode}" created!`)}catch(c){n("error",((r=(a=c.response)==null?void 0:a.data)==null?void 0:r.message)||"Failed to create course")}finally{w(!1)}},B=async(s,a)=>{if(window.confirm(`Delete course "${a}"?`))try{await d.deleteCourse(s),await h(),n("success","Course deleted")}catch{n("error","Failed to delete course")}},O=async s=>{var a,r;s.preventDefault(),A(!0);try{await d.enrollStudent({studentId:parseInt(v.studentId),courseId:parseInt(v.courseId)}),b({studentId:"",courseId:""}),n("success","Student enrolled successfully!")}catch(c){n("error",((r=(a=c.response)==null?void 0:a.data)==null?void 0:r.message)||"Enrollment failed")}finally{A(!1)}},z=[{id:"departments",label:e.jsx(e.Fragment,{children:"Departments"}),count:u.length},{id:"courses",label:e.jsx(e.Fragment,{children:" Courses"}),count:m.length},{id:"students",label:e.jsx(e.Fragment,{children:"Students"}),count:x.length},{id:"teachers",label:e.jsx(e.Fragment,{children:"Teachers"}),count:j.length},{id:"enroll",label:e.jsx(e.Fragment,{children:" Enroll"}),count:null}];return e.jsxs("div",{className:"dashboard",children:[e.jsx(G,{}),e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"dashboard-welcome",children:[e.jsxs("h2",{children:["Admin Dashboard   ",e.jsx(W,{})]}),e.jsx("p",{children:"Manage departments, courses, and student enrollments"})]}),g&&e.jsxs("div",{className:`admin-alert admin-alert-${g.type}`,children:[g.type==="success"?"‚úÖ":"‚ö†Ô∏è"," ",g.message]}),e.jsxs("div",{className:"stats-row",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon blue",children:e.jsx(C,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:u.length}),e.jsx("div",{className:"stat-label",children:"Departments"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon green",children:e.jsx(Y,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:m.length}),e.jsx("div",{className:"stat-label",children:"Courses"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon orange",children:e.jsx(Q,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:x.length}),e.jsx("div",{className:"stat-label",children:"Students"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon purple",children:e.jsx(U,{})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:j.length}),e.jsx("div",{className:"stat-label",children:"Teachers"})]})]})]}),e.jsxs("div",{className:"tabs-container",children:[e.jsx("div",{className:"tabs-header",children:z.map(s=>e.jsxs("button",{className:`tab-btn ${o===s.id?"active":""}`,onClick:()=>T(s.id),children:[s.label,s.count!==null&&e.jsx("span",{className:"tab-badge",children:s.count})]},s.id))}),o==="departments"&&e.jsx("div",{className:"tab-content",children:e.jsxs("div",{className:"admin-two-col",children:[e.jsxs("div",{className:"admin-form-card",children:[e.jsx("h4",{className:"form-title",children:"‚ûï Add Department"}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Department Name"}),e.jsx("input",{type:"text",placeholder:"e.g. Computer Science",value:N.departmentName,onChange:s=>f(a=>({...a,departmentName:s.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (Optional)"}),e.jsx("input",{type:"text",placeholder:"Brief description",value:N.description,onChange:s=>f(a=>({...a,description:s.target.value}))})]}),e.jsx("button",{type:"submit",className:"btn-admin-submit",disabled:S,children:S?"Creating...":"+ Create Department"})]})]}),e.jsxs("div",{className:"admin-list-card",children:[e.jsxs("h4",{className:"form-title",children:[e.jsx(C,{})," All Departments"]}),p?e.jsx("div",{className:"loading-spinner",children:"Loading..."}):u.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("span",{className:"empty-icon",children:e.jsx(C,{})}),e.jsx("p",{children:"No departments yet"})]}):e.jsx("div",{className:"admin-items-list",children:u.map(s=>e.jsxs("div",{className:"admin-item",children:[e.jsxs("div",{className:"admin-item-info",children:[e.jsx("div",{className:"admin-item-name",children:s.departmentName}),e.jsxs("div",{className:"admin-item-meta",children:[s.totalCourses," courses",s.description&&` ¬∑ ${s.description}`]})]}),e.jsx("button",{className:"btn-delete",onClick:()=>P(s.id,s.departmentName),children:"üóë"})]},s.id))})]})]})}),o==="courses"&&e.jsx("div",{className:"tab-content",children:e.jsxs("div",{className:"admin-two-col",children:[e.jsxs("div",{className:"admin-form-card",children:[e.jsx("h4",{className:"form-title",children:"‚ûï Add Course"}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"form-row-two",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Course Code"}),e.jsx("input",{type:"text",placeholder:"e.g. CS401",value:l.courseCode,onChange:s=>i(a=>({...a,courseCode:s.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Credits"}),e.jsx("input",{type:"number",placeholder:"e.g. 3",value:l.credits,onChange:s=>i(a=>({...a,credits:s.target.value}))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Course Name"}),e.jsx("input",{type:"text",placeholder:"e.g. Database Systems",value:l.courseName,onChange:s=>i(a=>({...a,courseName:s.target.value})),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Semester"}),e.jsx("input",{type:"text",placeholder:"e.g. Spring 2026",value:l.semester,onChange:s=>i(a=>({...a,semester:s.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Assign Teacher"}),e.jsxs("select",{value:l.teacherId,onChange:s=>i(a=>({...a,teacherId:s.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Teacher"}),j.map(s=>e.jsxs("option",{value:s.id,children:[s.fullName," (",s.employeeId,")"]},s.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Department"}),e.jsxs("select",{value:l.departmentId,onChange:s=>i(a=>({...a,departmentId:s.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),u.map(s=>e.jsx("option",{value:s.id,children:s.departmentName},s.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (Optional)"}),e.jsx("input",{type:"text",placeholder:"Brief course description",value:l.description,onChange:s=>i(a=>({...a,description:s.target.value}))})]}),e.jsx("button",{type:"submit",className:"btn-admin-submit",disabled:D,children:D?"Creating...":"+ Create Course"})]})]}),e.jsxs("div",{className:"admin-list-card",children:[e.jsx("h4",{className:"form-title",children:"üìö All Courses"}),p?e.jsx("div",{className:"loading-spinner",children:"Loading..."}):m.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("span",{className:"empty-icon",children:"üìö"}),e.jsx("p",{children:"No courses yet"})]}):e.jsx("div",{className:"admin-items-list",children:m.map(s=>e.jsxs("div",{className:"admin-item",children:[e.jsxs("div",{className:"admin-item-info",children:[e.jsxs("div",{className:"admin-item-name",children:[e.jsx("span",{className:"course-code",children:s.courseCode})," ",s.courseName]}),e.jsxs("div",{className:"admin-item-meta",children:["üë®‚Äçüè´ ",s.teacherName||"Unassigned"," ¬∑ ","üèõ ",s.departmentName||"N/A"]})]}),e.jsx("button",{className:"btn-delete",onClick:()=>B(s.id,s.courseCode),children:"üóë"})]},s.id))})]})]})}),o==="students"&&e.jsx("div",{className:"tab-content",children:p?e.jsx("div",{className:"loading-spinner",children:"Loading..."}):e.jsxs("table",{className:"attendance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Student ID"}),e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Year"}),e.jsx("th",{children:"Courses"})]})}),e.jsx("tbody",{children:x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"DM Mono, monospace",fontSize:"12px"},children:s.studentId})}),e.jsx("td",{style:{fontWeight:600},children:s.fullName}),e.jsx("td",{style:{color:"#7A8499"},children:s.email}),e.jsx("td",{children:s.departmentName}),e.jsxs("td",{children:["Year ",s.yearOfStudy]}),e.jsx("td",{children:e.jsxs("span",{className:"status-badge status-PRESENT",children:[s.totalEnrolledCourses," enrolled"]})})]},s.id))})]})}),o==="teachers"&&e.jsx("div",{className:"tab-content",children:p?e.jsx("div",{className:"loading-spinner",children:"Loading..."}):e.jsxs("table",{className:"attendance-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee ID"}),e.jsx("th",{children:"Full Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Department"}),e.jsx("th",{children:"Courses"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{style:{fontFamily:"DM Mono, monospace",fontSize:"12px"},children:s.employeeId})}),e.jsx("td",{style:{fontWeight:600},children:s.fullName}),e.jsx("td",{style:{color:"#7A8499"},children:s.email}),e.jsx("td",{children:s.departmentName}),e.jsx("td",{children:e.jsxs("span",{className:"status-badge status-PRESENT",children:[s.totalCourses," courses"]})})]},s.id))})]})}),o==="enroll"&&e.jsx("div",{className:"tab-content",children:e.jsxs("div",{className:"admin-two-col",children:[e.jsxs("div",{className:"admin-form-card",children:[e.jsx("h4",{className:"form-title",children:"‚úÖ Enroll Student in Course"}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select Student"}),e.jsxs("select",{value:v.studentId,onChange:s=>b(a=>({...a,studentId:s.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Choose Student"}),x.map(s=>e.jsxs("option",{value:s.id,children:[s.fullName," (",s.studentId,")"]},s.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Select Course"}),e.jsxs("select",{value:v.courseId,onChange:s=>b(a=>({...a,courseId:s.target.value})),required:!0,children:[e.jsx("option",{value:"",children:"Choose Course"}),m.map(s=>e.jsxs("option",{value:s.id,children:[s.courseCode," ‚Äî ",s.courseName]},s.id))]})]}),e.jsx("button",{type:"submit",className:"btn-admin-submit",disabled:F,children:F?"Enrolling...":"‚úÖ Enroll Student"})]})]}),e.jsxs("div",{className:"admin-info-card",children:[e.jsx("h4",{className:"form-title",children:"‚ÑπÔ∏è Quick Info"}),e.jsxs("div",{className:"info-stats",children:[e.jsxs("div",{className:"info-stat",children:[e.jsx("span",{className:"info-stat-value",children:x.length}),e.jsx("span",{className:"info-stat-label",children:"Total Students"})]}),e.jsxs("div",{className:"info-stat",children:[e.jsx("span",{className:"info-stat-value",children:m.length}),e.jsx("span",{className:"info-stat-label",children:"Total Courses"})]}),e.jsxs("div",{className:"info-stat",children:[e.jsx("span",{className:"info-stat-value",children:j.length}),e.jsx("span",{className:"info-stat-label",children:"Total Teachers"})]})]}),e.jsx("p",{className:"info-note",children:'Students can also self-enroll from their dashboard under the "Register Courses" tab.'})]})]})})]})]})]})};export{Z as default};
