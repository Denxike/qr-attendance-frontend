import{u as f,j as e}from"./index-qMUiajPw.js";import{u as v,r,L as N}from"./vendor-BCPqKLS0.js";import{S,E as y,a as b}from"./icons-DPHu3S6L.js";const I=()=>{const t=v(),{login:m}=f(),[n,g]=r.useState(!1),[d,p]=r.useState(""),[c,x]=r.useState(""),[u,i]=r.useState(""),[l,h]=r.useState(!1),j=async a=>{a.preventDefault(),h(!0),i("");try{const o=await fetch("http://localhost:8080/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,password:c})}),s=await o.json();if(!o.ok){i(s.message||"Login failed");return}console.log("Login success:",s),m({userId:s.userId,studentId:s.studentId,teacherId:s.teacherId,email:s.email,fullName:s.fullName,role:s.role},s.token),s.role==="STUDENT"?t("/student/dashboard"):s.role==="TEACHER"?t("/teacher/dashboard"):s.role==="ADMIN"&&t("/admin/dashboard")}catch(o){console.error("Login error:",o),i("Cannot connect to server. Is Spring Boot running?")}finally{h(!1)}};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("div",{className:"logo",children:e.jsx(S,{})}),e.jsx("h1",{children:"Welcome Back"}),e.jsx("p",{children:"Sign in to your attendance account"})]}),u&&e.jsxs("div",{className:"alert-error",children:["⚠️ ",u]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",value:d,onChange:a=>p(a.target.value),placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{className:"form-group psw-group",children:[e.jsx("label",{children:"Password"}),e.jsxs("div",{className:"psw-container",children:[e.jsx("input",{type:n?"text":"password",value:c,onChange:a=>x(a.target.value),placeholder:"Enter your password",required:!0}),e.jsx("button",{type:"button",className:"toggle-password",onClick:()=>g(!n),children:n?e.jsx(y,{}):e.jsx(b,{})})]})]}),e.jsx("button",{type:"submit",className:`btn-login ${l?"loading":""}`,disabled:l,children:l?"":"Sign In"})]}),e.jsxs("div",{className:"login-footer",children:[e.jsx("div",{className:"divider",children:"or"}),"Don't have an account?"," ",e.jsx(N,{to:"/register",children:"Create Account"})]})]})})};export{I as default};
